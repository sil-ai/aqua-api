{
    "pipeline": {
        "name": "create_refs"
    },
    "description": "A pipeline that takes source input files and forwards them together with their index-cache file.",
    "transform": {
        "cmd": [
            "python3",
            "create_refs.py",
            "--inpath",
            "/pfs/word_alignment",
            "--ref-inpath",
            "/pfs/refs",
            "--outpath",
            "/pfs/out"
        ],
        "image": "woodwardmw/<imagename>:<tag>"
    },
    "input": {
        "cross": [
            {
                "group": [
                    {
                        "union": [
                            {
                                "pfs": {
                                    "repo": "word_alignment",
                                    "glob": "/(*)/verse_scores.csv",
                                    "group_by": "($1)"
                                }
                            },
                            {
                                "pfs": {
                                    "repo": "word_alignment",
                                    "glob": "/(*)/word_scores.csv",
                                    "group_by": "($1)"
                                }
                            },
                            {
                                "pfs": {
                                    "repo": "word_alignment",
                                    "glob": "/(*)/meta.json",
                                    "group_by": "($1)"
                                }
                            },
                            {
                                "pfs": {
                                    "repo": "word_alignment",
                                    "glob": "/(*)/*.txt",
                                    "group_by": "($1)"
                                }
                            }
                        ]
                    }
                ]
            },
            {
                "pfs": {
                    "repo": "refs",
                    "glob": "/"
                }
            }
        ]
    }
}